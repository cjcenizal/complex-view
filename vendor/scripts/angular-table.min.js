// author:   Samuel Mueller 
// version:  0.0.7 
// license:  MIT 
// homepage: http://github.com/ssmm/angular-table 
!function(){angular.module("angular-table",[]),angular.module("angular-table").directive("atTable",["metaCollector","setupFactory",function(t,e){var i,n,r;return i=function(t,e){var i,n,r,a,o,l,u,c,g,s,f;for(l=angular.element("<tr></tr>"),u=0,g=e.length;g>u;u++){if(r=e[u],a=angular.element("<th style='cursor: pointer;'></th>"),t[r.attribute]){for(f=t[r.attribute].attributes,c=0,s=f.length;s>c;c++)i=f[c],a.attr(""+i.name,""+i.value);o=t[r.attribute].content}else o=r.title;a.html(""+o),r.sortable&&(a.attr("ng-click","predicate = '"+r.attribute+"'; descending = !descending;"),n=angular.element("<i style='margin-left: 10px;'></i>"),n.attr("ng-class","getSortIcon('"+r.attribute+"')"),a.append(n)),a.attr("width",r.width),l.append(a)}return l},r=function(t){if(t.pagination&&t.list)throw"You can not specify a list if you have specified a pagination. The list defined for the pagnination will automatically be used.";if(!t.pagination&&!t.list)throw"Either a list or pagination must be specified."},n=function(t){return t.atPagination?(t.pagination=t.atPagination,t.atPagination=null):void 0},{restrict:"AC",scope:!0,compile:function(a,o,l){var u,c,g,s,f,d;return n(o),r(o),f=a.find("thead"),s=a.find("tbody"),u=t.collectBodyDefinition(s),f[0]&&(c=t.collectCustomHeaderMarkup(f),d=f.find("tr"),d.remove(),f.append(i(c,u.tds))),g=e(o),g.compile(a,o,l),{post:function(t,e,i){return u.initialSorting&&(t.predicate=u.initialSorting.predicate,t.descending="desc"===u.initialSorting.direction),t.getSortIcon=function(e){return e!==t.predicate?"icon-minus":t.descending?"icon-chevron-down":"icon-chevron-up"},g.link(t,e,i)}}}}}]),angular.module("angular-table").directive("atImplicit",[function(){return{restrict:"AC",compile:function(t){var e;if(e=t.attr("attribute"),!e)throw"at-implicit specified without attribute: "+t.html();return t.append("{{item."+e+"}}")}}}]),angular.module("angular-table").directive("atPagination",[function(){return{replace:!0,restrict:"E",template:"      <div class='pagination' style='margin: 0px;'>        <ul>          <li ng-class='{disabled: currentPage <= 0}'>            <a href='' ng-click='goToPage(currentPage - 1)'>&laquo;</a>          </li>          <li ng-class='{active: currentPage == page}' ng-repeat='page in pages'>            <a href='' ng-click='goToPage(page)'>{{page + 1}}</a>          </li>          <li ng-class='{disabled: currentPage >= numberOfPages - 1}'>            <a href='' ng-click='goToPage(currentPage + 1); normalize()'>&raquo;</a>          </li>        </ul>      </div>",scope:{itemsPerPage:"@",instance:"=",list:"="},link:function(t){var e,i;return t.instance=t,t.currentPage=0,e=function(e){return e=Math.max(0,e),e=Math.min(t.numberOfPages-1,e)},i=function(){var e;return t.currentPage=0,t.list?t.list.length>0?(t.numberOfPages=Math.ceil(t.list.length/t.itemsPerPage),t.pages=function(){var i,n,r;for(r=[],e=i=0,n=t.numberOfPages-1;n>=0?n>=i:i>=n;e=n>=0?++i:--i)r.push(e);return r}()):(t.numberOfPages=1,t.pages=[0]):void 0},t.fromPage=function(){return t.list?t.itemsPerPage*t.currentPage-t.list.length:void 0},t.getFillerArray=function(){var e,i,n,r,a,o,l;if(t.currentPage===t.numberOfPages-1){if(i=t.list.length%t.itemsPerPage,0!==i||0===t.list.length){for(e=t.itemsPerPage-i-1,l=[],n=r=a=t.list.length,o=t.list.length+e;o>=a?o>=r:r>=o;n=o>=a?++r:--r)l.push(n);return l}return[]}},t.goToPage=function(i){return t.currentPage=e(i)},i(),t.$watch("itemsPerPage",function(){return i()}),t.$watch("list",function(){return i()})}}}]),angular.module("angular-table").service("metaCollector",[function(){var t,e,i,n;return t=function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},e=function(t){var e;return e=/([0-9]+px)/i.exec(t),e?e[0]:""},n=function(t){var e;return e=/(sortable)/i.exec(t),e?!0:!1},i=function(t){var e;if(e=t.attr("initial-sorting")){if("asc"===e||"desc"===e)return e;throw"Invalid value for initial-sorting: "+e+". Allowed values are 'asc' or 'desc'."}return void 0},{collectCustomHeaderMarkup:function(t){var e,i,n,r,a,o,l;for(i={},r=t.find("tr"),l=r.find("th"),a=0,o=l.length;o>a;a++)n=l[a],n=angular.element(n),e=i[n.attr("attribute")]={},e.content=n.html(),e.attributes=n[0].attributes;return i},collectBodyDefinition:function(r){var a,o,l,u,c,g,s,f,d,p;for(o={},o.tds=[],o.initialSorting=void 0,p=r.find("td"),f=0,d=p.length;d>f;f++)if(c=p[f],c=angular.element(c),a=c.attr("attribute"),g=c.attr("title")||t(c.attr("attribute")),u=c[0].attributes.sortable||n(c.attr("class")),s=e(c.attr("class")),o.tds.push({attribute:a,title:g,sortable:u,width:s}),l=i(c)){if(!a)throw"initial-sorting specified without attribute.";o.initialSorting={},o.initialSorting.direction=l,o.initialSorting.predicate=a}return o}}}]),angular.module("angular-table").factory("setupFactory",[function(){var t,e,i,n,r;return n="| orderBy:predicate:descending",i="| limitTo:fromPage() | limitTo:toPage()",r=function(t,e){var i,n;return i=t.find("tbody"),n=i.find("tr"),n.attr("ng-repeat",e),i},e=function(t){var e;e="item in "+t.list+" "+n,this.compile=function(t){return r(t,e)},this.link=function(){}},t=function(t){var e,a,o;if(o=t.sortContext||"global",e=t.pagination,"global"===o)a="item in "+e+".list "+n+" "+i;else{if("page"!==o)throw"Invalid sort-context: "+o+".";a="item in "+e+".list "+i+" "+n+" "}this.compile=function(t,i){var n,o,l,u,c,g,s;if(o=r(t,a),"undefined"!=typeof i.fillLastPage){for(c=t.find("td"),u="",g=0,s=c.length;s>g;g++)l=c[g],u+="<td>&nbsp;</td>";return n=angular.element("<tr>"+u+"</tr>"),n.attr("ng-repeat","item in "+e+".getFillerArray() "),o.append(n)}},this.link=function(t){return t.fromPage=function(){return t[e]?t[e].fromPage():void 0},t.toPage=function(){return t[e]?t[e].itemsPerPage:void 0}}},function(i){return i.list?new e(i):i.pagination?new t(i):void 0}}])}.call(this);